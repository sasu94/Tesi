SET FOREIGN_KEY_CHECKS = 0;
DROP TABLE IF EXISTS `Subject`;
DROP TABLE IF EXISTS `Family`;
DROP TABLE IF EXISTS `Variation`;
DROP TABLE IF EXISTS `User`;
DROP TABLE IF EXISTS `Laboratory`;
DROP TABLE IF EXISTS `Project`;
DROP TABLE IF EXISTS `File`;
SET FOREIGN_KEY_CHECKS = 1;

CREATE TABLE `Subject` (
    `Id` VARCHAR(255) NOT NULL,
    PRIMARY KEY (`Id`)
);

CREATE TABLE `Family` (
    `Subject1` VARCHAR(255) NOT NULL,
    `Subject2` VARCHAR(255) NOT NULL,
    `Gen` INTEGER NOT NULL,
    PRIMARY KEY (`Subject1`, `Subject2`)
);

CREATE TABLE `Variation` (
    `Subject` VARCHAR(255) NOT NULL,
    `Id` INTEGER NOT NULL AUTO_INCREMENT,
    `Chr` VARCHAR(7),
    `Start` INTEGER,
    `End` INTEGER,
    `Ref` VARCHAR(50),
    `Alt` VARCHAR(50),
    `Func.refgene` VARCHAR(50),
    `Gene.refgene` VARCHAR(50),
    `Gene.Detail.refgene` VARCHAR(600),
    `ExonicFunc.refgene` VARCHAR(50),
    `AAChange.refgene` VARCHAR(1500),
    `1000G_ALL` FLOAT,
    `1000G_AFR` FLOAT,
    `1000G_AMR` FLOAT,
    `1000G_EAS` FLOAT,
    `1000G_EUR` FLOAT,
    `1000G_SAS` FLOAT,
    `ExAC_Freq` FLOAT,
    `ExAC_AFR` FLOAT,
    `ExAC_AMR` FLOAT,
    `ExAC_EAS` FLOAT,
    `ExAC_FIN` FLOAT,
    `ExAC_NFE` FLOAT,
    `ExAC_OTH` FLOAT,
    `ExAC_SAS` FLOAT,
    `ESP6500si_ALL` FLOAT,
    `ESP6500si_AA` FLOAT,
    `ESP6500si_EA` FLOAT,
    `CG46` FLOAT,
    `NCI60` FLOAT,
    `dbSNP` VARCHAR(50),
    `COSMIC_ID` VARCHAR(100),
    `COSMIC_DIS` VARCHAR(300),
    `ClinVar_SIG` VARCHAR(100),
    `ClinVar_DIS` VARCHAR(300),
    `ClinVar_STATUS` VARCHAR(70),
    `ClinVar_ID` VARCHAR(200),
    `ClinVar_DB` VARCHAR(200),
    `ClinVar_DBID` VARCHAR(200),
    `GWAS_DIS` VARCHAR(100),
    `GWAS_OR` FLOAT,
    `GWAS_BETA` FLOAT,
    `GWAS_PUBMED` INTEGER,
    `GWAS_SNP` FLOAT,
    `GWAS_P` DOUBLE,
    `SIFT_score` FLOAT,
    `SIFT_pred` VARCHAR(2),
    `Polyphen2_HDIV_score` FLOAT,
    `Polyphen2_HDIV_pred` VARCHAR(2),
    `Polyphen2_HVAR_score` FLOAT,
    `Polyphen2_HVAR_pred` VARCHAR(2),
    `LRT_score` FLOAT,
    `LRT_pred` VARCHAR(2),
    `MutationTaster_score` FLOAT,
    `MutationTaster_pred` VARCHAR(2),
    `MutationAssessor_score` FLOAT,
    `MutationAssessor_pred` VARCHAR(2),
    `FATHMM_score` FLOAT,
    `FATHMM_pred` VARCHAR(2),
    `RadialSVM_score` FLOAT,
    `RadialSVM_pred` VARCHAR(2),
    `LR_score` FLOAT,
    `LR_pred` VARCHAR(2),
    `VEST3_score` FLOAT,
    `CADD_raw` FLOAT,
    `CADD_phred` FLOAT,
    `GERP++_RS` FLOAT,
    `phyloP46way_placental` FLOAT,
    `phyloP100way_vertebrate` FLOAT,
    `SiPhy_29way_logOdds` FLOAT,
    `Status` VARCHAR(3),
    `Qual` FLOAT,
    `Depth` INTEGER,
    `Sample` INTEGER NOT NULL,
    PRIMARY KEY (`Id`)
);

CREATE TABLE `User` (
    `Id` INTEGER NOT NULL AUTO_INCREMENT,
    `Password` VARCHAR(255) NOT NULL,
    `Username` VARCHAR(255) NOT NULL,
    `Laboratory` INTEGER NOT NULL,
    PRIMARY KEY (`Id`)
);

CREATE TABLE `Laboratory` (
    `Id` INTEGER NOT NULL AUTO_INCREMENT,
    `Name` VARCHAR(255) NOT NULL,
    PRIMARY KEY (`Id`)
);

CREATE TABLE `Project` (
    `Id` INTEGER NOT NULL AUTO_INCREMENT,
    `Name` VARCHAR(255),
    `User` INTEGER NOT NULL,
    PRIMARY KEY (`Id`)
);

CREATE TABLE `Sample` (
    `Name` VARCHAR(255) NOT NULL,
    `Id` INTEGER NOT NULL AUTO_INCREMENT,
    `Project` INTEGER NOT NULL,
    PRIMARY KEY (`Id`)
);

ALTER TABLE `Family` ADD FOREIGN KEY (`Subject1`) REFERENCES `Subject`(`Id`);
ALTER TABLE `Family` ADD FOREIGN KEY (`Subject2`) REFERENCES `Subject`(`Id`);
ALTER TABLE `Variation` ADD FOREIGN KEY (`Subject`) REFERENCES `Subject`(`Id`);
ALTER TABLE `Variation` ADD FOREIGN KEY (`File`) REFERENCES `File`(`Id`);
ALTER TABLE `User` ADD FOREIGN KEY (`Laboratory`) REFERENCES `Laboratory`(`Id`);
ALTER TABLE `Project` ADD FOREIGN KEY (`User`) REFERENCES `User`(`Id`);
ALTER TABLE `File` ADD FOREIGN KEY (`Project`) REFERENCES `Project`(`Id`);
